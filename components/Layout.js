import Navigation from './Navigation'
import { useSession } from 'next-auth/react'
import { useRouter } from 'next/router'

import Box from '@mui/material/Box'

import FeedbackPopup from '@/components/FeedbackPopup'
import NotificationPopup from '@/components/NotificationPopup'
import BodyColumn from '@/components/BodyColumn'
import ProfileMenu from '@/components/ProfileMenu'


export const metadata = {
  title: 'Create Next App',
  description: 'Generated by create next app',
}

export default function RootLayout({ children }) {
  const {status} = useSession();
  const router = useRouter();
  if (status == "loading") return;
  if (status == "unauthenticated") {
    if (router.pathname != "/") router.push("/")
    return (
    <>{children}</>
  )
  }
  return (
    <Box sx={{ display: 'flex'}}>
      <Navigation/>
        <BodyColumn>
          {children}
          <ProfileMenu />
          <NotificationPopup />
          <FeedbackPopup />
        </BodyColumn>
    </Box>
  )
}
